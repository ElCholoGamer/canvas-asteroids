{"version":3,"sources":["webpack://canvas-asteroids/./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://canvas-asteroids/./node_modules/@babel/runtime/helpers/construct.js","webpack://canvas-asteroids/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://canvas-asteroids/./node_modules/@babel/runtime/helpers/inherits.js","webpack://canvas-asteroids/./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","webpack://canvas-asteroids/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://canvas-asteroids/./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack://canvas-asteroids/./node_modules/@babel/runtime/helpers/typeof.js","webpack://canvas-asteroids/./src/objects/bullet.ts","webpack://canvas-asteroids/./src/objects/player.ts","webpack://canvas-asteroids/./src/scenes/game.ts","webpack://canvas-asteroids/./src/structures/game-object.ts","webpack://canvas-asteroids/./src/structures/scene.ts"],"names":["module","exports","self","ReferenceError","setPrototypeOf","isNativeReflectConstruct","_construct","Parent","args","Class","Reflect","construct","a","push","apply","instance","Function","bind","prototype","arguments","_getPrototypeOf","o","Object","getPrototypeOf","__proto__","subClass","superClass","TypeError","create","constructor","value","writable","configurable","sham","Proxy","Date","toString","call","e","_typeof","assertThisInitialized","_setPrototypeOf","p","obj","Symbol","iterator","game","ROTATION","SPEED","SIZE","life","this","destroy","canvas","width","height","half","x","y","radians","Math","cos","sin","ctx","fillStyle","fillRect","SPRITE","sprites","get","SHOOT_SOUND","sounds","SPRITE_SIZE","ROTATION_SPEED","ACCELERATION","FRICTION","WIDTH","HEIGHT","forces","Array","fill","angle","controls","up","isKeyDown","right","left","space","isKeyPressed","mod","index","floor","length","max","force","halfMaxSize","sqrt","scene","instantiate","paused","pause","currentTime","play","translate","rotate","drawImage","GameObject","layer","Scene","_objects","ctor","filter"],"mappings":"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","file":"657.aa38a71d.chunk.js","sourcesContent":["function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct\");\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct;","var _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","import Game from '../structures/game';\nimport GameObject from '../structures/game-object';\n\nclass Bullet extends GameObject {\n\tprivate readonly SPEED = 8;\n\tprivate readonly SIZE = 4;\n\n\tprivate life = 60;\n\n\tpublic constructor(game: Game, private readonly ROTATION: number) {\n\t\tsuper(game);\n\t}\n\n\tpublic tick() {\n\t\tif (--this.life <= 0) {\n\t\t\tthis.destroy();\n\t\t}\n\n\t\t// Wrap bullet position\n\t\tconst { width, height } = this.game.canvas;\n\t\tconst half = this.SIZE / 2;\n\n\t\tif (this.x < -half) {\n\t\t\tthis.x = width + half;\n\t\t} else if (this.x > width + half) {\n\t\t\tthis.x = -half;\n\t\t}\n\n\t\tif (this.y < -half) {\n\t\t\tthis.y = height + half;\n\t\t} else if (this.x > height + half) {\n\t\t\tthis.y = -half;\n\t\t}\n\n\t\tconst radians = Math.radians(this.ROTATION);\n\t\tthis.x += Math.cos(radians) * this.SPEED;\n\t\tthis.y += Math.sin(radians) * this.SPEED;\n\t}\n\n\tpublic render(ctx: CanvasRenderingContext2D) {\n\t\tctx.fillStyle = 'white';\n\t\tctx.fillRect(\n\t\t\tthis.x - this.SIZE / 2,\n\t\t\tthis.y - this.SIZE / 2,\n\t\t\tthis.SIZE,\n\t\t\tthis.SIZE\n\t\t);\n\t}\n}\n\nexport default Bullet;\n","import GameObject from '../structures/game-object';\nimport Bullet from './bullet';\n\nclass Player extends GameObject {\n\tprivate readonly SPRITE = this.game.sprites.get('ship');\n\tprivate readonly SHOOT_SOUND = this.game.sounds.get('shoot');\n\tprivate readonly SPRITE_SIZE = 0.4;\n\tprivate readonly ROTATION_SPEED = 6;\n\n\tprivate readonly ACCELERATION = 0.2;\n\tprivate readonly FRICTION = 0.02;\n\n\tprivate readonly WIDTH = this.SPRITE.width * this.SPRITE_SIZE;\n\tprivate readonly HEIGHT = this.SPRITE.height * this.SPRITE_SIZE;\n\n\tprivate readonly forces = Array(360).fill(0);\n\tprivate angle = -90;\n\n\tpublic tick() {\n\t\tconst { controls, canvas } = this.game;\n\n\t\t// Keyboard input\n\t\tconst up = controls.isKeyDown('ArrowUp') || controls.isKeyDown('w');\n\t\tconst right = controls.isKeyDown('ArrowRight') || controls.isKeyDown('d');\n\t\tconst left = controls.isKeyDown('ArrowLeft') || controls.isKeyDown('a');\n\t\tconst space = controls.isKeyPressed(' ') || controls.isKeyPressed('z');\n\n\t\t// Rotate and wrap angle\n\t\tif (right) this.angle += this.ROTATION_SPEED;\n\t\tif (left) this.angle -= this.ROTATION_SPEED;\n\t\tthis.angle = Math.mod(this.angle, 360);\n\n\t\tif (up) {\n\t\t\t// Apply acceleration to current angle\n\t\t\tconst index = Math.floor(this.angle);\n\t\t\tthis.forces[index] += this.ACCELERATION;\n\t\t}\n\n\t\tfor (let angle = 0; angle < this.forces.length; angle++) {\n\t\t\t// Apply friction to force\n\t\t\tthis.forces[angle] = Math.max(\n\t\t\t\t0,\n\t\t\t\tthis.forces[angle] * (1 - this.FRICTION)\n\t\t\t);\n\n\t\t\t// Apply force\n\t\t\tconst force = this.forces[angle];\n\n\t\t\tconst radians = Math.radians(angle);\n\t\t\tthis.x += Math.cos(radians) * force;\n\t\t\tthis.y += Math.sin(radians) * force;\n\t\t}\n\n\t\t// Wrap position\n\t\tconst { width, height } = canvas;\n\t\tconst halfMaxSize = Math.sqrt(this.WIDTH ** 2 + this.HEIGHT ** 2);\n\n\t\tif (this.x < -halfMaxSize) {\n\t\t\tthis.x = width + halfMaxSize;\n\t\t} else if (this.x > width + halfMaxSize) {\n\t\t\tthis.x = -halfMaxSize;\n\t\t}\n\n\t\tif (this.y < -halfMaxSize) {\n\t\t\tthis.y = height + halfMaxSize;\n\t\t} else if (this.y > height + halfMaxSize) {\n\t\t\tthis.y = -halfMaxSize;\n\t\t}\n\n\t\t// Shoot\n\t\tif (space) {\n\t\t\tconst offset = 8;\n\t\t\tconst radians = Math.radians(this.angle);\n\t\t\tthis.game.scene.instantiate(\n\t\t\t\tBullet,\n\t\t\t\tthis.x + Math.cos(radians) * offset,\n\t\t\t\tthis.y + Math.sin(radians) * offset,\n\t\t\t\tthis.angle\n\t\t\t);\n\n\t\t\tif (!this.SHOOT_SOUND.paused) {\n\t\t\t\tthis.SHOOT_SOUND.pause();\n\t\t\t\tthis.SHOOT_SOUND.currentTime = 0;\n\t\t\t}\n\n\t\t\tthis.SHOOT_SOUND.play();\n\t\t}\n\t}\n\n\tpublic render(ctx: CanvasRenderingContext2D) {\n\t\tctx.translate(this.x, this.y);\n\t\tctx.rotate(Math.radians(this.angle + 90));\n\n\t\tctx.drawImage(\n\t\t\tthis.SPRITE,\n\t\t\t-(this.WIDTH / 2),\n\t\t\t-(this.HEIGHT / 2),\n\t\t\tthis.WIDTH,\n\t\t\tthis.HEIGHT\n\t\t);\n\t}\n}\n\nexport default Player;\n","import Player from '../objects/player';\nimport Scene from '../structures/scene';\n\nclass GameScene extends Scene {\n\tpublic start() {\n\t\tconst { scene, canvas } = this.game;\n\t\tconst { width, height } = canvas;\n\n\t\tscene.instantiate(Player, width / 2, height / 2);\n\t}\n}\n\nexport default GameScene;\n","import Game from './game';\n\nabstract class GameObject {\n\tpublic x = 0;\n\tpublic y = 0;\n\n\tpublic constructor(protected readonly game: Game, public layer = 0) {}\n\n\tpublic abstract tick(): void;\n\tpublic abstract render(ctx: CanvasRenderingContext2D): void;\n\n\tpublic destroy() {\n\t\tthis.game.scene.destroy(this);\n\t}\n}\n\nexport default GameObject;\n","import Game from './game';\nimport GameObject from './game-object';\n\nabstract class Scene {\n\tprivate _objects: GameObject[] = [];\n\n\tpublic constructor(protected readonly game: Game) {}\n\n\tpublic abstract start(): void;\n\n\tpublic instantiate<T extends GameObject, A extends any[]>(\n\t\tctor: new (game: Game, ...args: A) => T,\n\t\tx: number,\n\t\ty: number,\n\t\t...args: A\n\t): T {\n\t\tconst obj = new ctor(this.game, ...args);\n\t\tobj.x = x;\n\t\tobj.y = y;\n\t\tthis._objects.push(obj);\n\n\t\treturn obj;\n\t}\n\n\tpublic destroy(obj: GameObject) {\n\t\tthis._objects = this._objects.filter(o => o !== obj);\n\t}\n\n\tpublic get objects(): ReadonlyArray<GameObject> {\n\t\treturn this._objects;\n\t}\n}\n\nexport default Scene;\n"],"sourceRoot":""}